<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" 
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" 
             xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" 
             xmlns:modeler="http://camunda.org/schema/modeler/1.0" 
             xmlns:camunda="http://camunda.org/schema/1.0/dmn" 
             xmlns:di="http://www.omg.org/spec/DMN/20180521/DI/" 
             id="risk_rating_definitions" 
             name="Risk Rating DMN" 
             namespace="http://camunda.org/schema/1.0/dmn" 
             exporter="Camunda Modeler" 
             exporterVersion="5.38.1" 
             modeler:executionPlatform="Camunda Platform" 
             modeler:executionPlatformVersion="7.23.0">
  
  <!--
    RISK RATING DMN - CORRECTED VERSION
    
    CRITICAL FIXES:
    1. Input expressions now contain proper variable names: age, carMake, carModel
    2. Decision ID matches BPMN reference: risk_rating_dmn
    3. Output values are CAPITALIZED: "Green", "Yellow", "Red"
    
    Input Variables (from process):
    - age: integer (applicant's age)
    - carMake: string (vehicle manufacturer)  
    - carModel: string (vehicle model name)
  -->
  
  <decision id="risk_rating_dmn" name="Risk Rating Decision" camunda:historyTimeToLive="180">
    
    <informationRequirement id="InformationRequirement_age">
      <requiredInput href="#InputData_age" />
    </informationRequirement>
    <informationRequirement id="InformationRequirement_carMake">
      <requiredInput href="#InputData_carMake" />
    </informationRequirement>
    <informationRequirement id="InformationRequirement_carModel">
      <requiredInput href="#InputData_carModel" />
    </informationRequirement>
    
    <decisionTable id="DecisionTable_RiskRating" hitPolicy="FIRST">
      
      <!-- Input 1: Age -->
      <input id="Input_Age" label="Age">
        <inputExpression id="InputExpression_Age" typeRef="integer">
          <text>age</text>
        </inputExpression>
      </input>
      
      <!-- Input 2: Car Make -->
      <input id="Input_CarMake" label="Car Make">
        <inputExpression id="InputExpression_CarMake" typeRef="string">
          <text>carMake</text>
        </inputExpression>
      </input>
      
      <!-- Input 3: Car Model -->
      <input id="Input_CarModel" label="Car Model">
        <inputExpression id="InputExpression_CarModel" typeRef="string">
          <text>carModel</text>
        </inputExpression>
      </input>
      
      <!-- Output: Risk Rating -->
      <output id="Output_Rating" label="Risk Rating" name="rating" typeRef="string" />
      
      <!-- Rule 1: Young + Porsche = Red -->
      <rule id="Rule_1">
        <inputEntry id="Rule1_Age"><text>&lt;= 25</text></inputEntry>
        <inputEntry id="Rule1_Make"><text>"Porsche"</text></inputEntry>
        <inputEntry id="Rule1_Model"><text></text></inputEntry>
        <outputEntry id="Rule1_Out"><text>"Red"</text></outputEntry>
      </rule>
      
      <!-- Rule 2: Ferrari/Lamborghini = Red -->
      <rule id="Rule_2">
        <inputEntry id="Rule2_Age"><text></text></inputEntry>
        <inputEntry id="Rule2_Make"><text>"Ferrari","Lamborghini"</text></inputEntry>
        <inputEntry id="Rule2_Model"><text></text></inputEntry>
        <outputEntry id="Rule2_Out"><text>"Red"</text></outputEntry>
      </rule>
      
      <!-- Rule 3: Very young (<=21) = Yellow -->
      <rule id="Rule_3">
        <inputEntry id="Rule3_Age"><text>&lt;= 21</text></inputEntry>
        <inputEntry id="Rule3_Make"><text></text></inputEntry>
        <inputEntry id="Rule3_Model"><text></text></inputEntry>
        <outputEntry id="Rule3_Out"><text>"Yellow"</text></outputEntry>
      </rule>
      
      <!-- Rule 4: Porsche 911 = Yellow -->
      <rule id="Rule_4">
        <inputEntry id="Rule4_Age"><text></text></inputEntry>
        <inputEntry id="Rule4_Make"><text>"Porsche"</text></inputEntry>
        <inputEntry id="Rule4_Model"><text>"911"</text></inputEntry>
        <outputEntry id="Rule4_Out"><text>"Yellow"</text></outputEntry>
      </rule>
      
      <!-- Rule 5: BMW X3 = Yellow -->
      <rule id="Rule_5">
        <inputEntry id="Rule5_Age"><text></text></inputEntry>
        <inputEntry id="Rule5_Make"><text>"BMW"</text></inputEntry>
        <inputEntry id="Rule5_Model"><text>"X3"</text></inputEntry>
        <outputEntry id="Rule5_Out"><text>"Yellow"</text></outputEntry>
      </rule>
      
      <!-- Rule 6: Young (<=30) + BMW = Yellow -->
      <rule id="Rule_6">
        <inputEntry id="Rule6_Age"><text>&lt;= 30</text></inputEntry>
        <inputEntry id="Rule6_Make"><text>"BMW"</text></inputEntry>
        <inputEntry id="Rule6_Model"><text></text></inputEntry>
        <outputEntry id="Rule6_Out"><text>"Yellow"</text></outputEntry>
      </rule>
      
      <!-- Rule 7: Mature (>25) + Porsche = Green -->
      <rule id="Rule_7">
        <inputEntry id="Rule7_Age"><text>&gt; 25</text></inputEntry>
        <inputEntry id="Rule7_Make"><text>"Porsche"</text></inputEntry>
        <inputEntry id="Rule7_Model"><text></text></inputEntry>
        <outputEntry id="Rule7_Out"><text>"Green"</text></outputEntry>
      </rule>
      
      <!-- Rule 8: Mature (>30) + BMW standard = Green -->
      <rule id="Rule_8">
        <inputEntry id="Rule8_Age"><text>&gt; 30</text></inputEntry>
        <inputEntry id="Rule8_Make"><text>"BMW"</text></inputEntry>
        <inputEntry id="Rule8_Model"><text>"318i","520i","525i","735i"</text></inputEntry>
        <outputEntry id="Rule8_Out"><text>"Green"</text></outputEntry>
      </rule>
      
      <!-- Rule 9: Audi = Green -->
      <rule id="Rule_9">
        <inputEntry id="Rule9_Age"><text></text></inputEntry>
        <inputEntry id="Rule9_Make"><text>"Audi"</text></inputEntry>
        <inputEntry id="Rule9_Model"><text></text></inputEntry>
        <outputEntry id="Rule9_Out"><text>"Green"</text></outputEntry>
      </rule>
      
      <!-- Rule 10: Volkswagen = Green -->
      <rule id="Rule_10">
        <inputEntry id="Rule10_Age"><text></text></inputEntry>
        <inputEntry id="Rule10_Make"><text>"Volkswagen","VW"</text></inputEntry>
        <inputEntry id="Rule10_Model"><text></text></inputEntry>
        <outputEntry id="Rule10_Out"><text>"Green"</text></outputEntry>
      </rule>
      
      <!-- Rule 11: Toyota = Green -->
      <rule id="Rule_11">
        <inputEntry id="Rule11_Age"><text></text></inputEntry>
        <inputEntry id="Rule11_Make"><text>"Toyota"</text></inputEntry>
        <inputEntry id="Rule11_Model"><text></text></inputEntry>
        <outputEntry id="Rule11_Out"><text>"Green"</text></outputEntry>
      </rule>
      
      <!-- Rule 12: Honda = Green -->
      <rule id="Rule_12">
        <inputEntry id="Rule12_Age"><text></text></inputEntry>
        <inputEntry id="Rule12_Make"><text>"Honda"</text></inputEntry>
        <inputEntry id="Rule12_Model"><text></text></inputEntry>
        <outputEntry id="Rule12_Out"><text>"Green"</text></outputEntry>
      </rule>
      
      <!-- Rule 13: Volvo = Green -->
      <rule id="Rule_13">
        <inputEntry id="Rule13_Age"><text></text></inputEntry>
        <inputEntry id="Rule13_Make"><text>"Volvo"</text></inputEntry>
        <inputEntry id="Rule13_Model"><text></text></inputEntry>
        <outputEntry id="Rule13_Out"><text>"Green"</text></outputEntry>
      </rule>
      
      <!-- Rule 14: Mature (>30) = Green -->
      <rule id="Rule_14">
        <inputEntry id="Rule14_Age"><text>&gt; 30</text></inputEntry>
        <inputEntry id="Rule14_Make"><text></text></inputEntry>
        <inputEntry id="Rule14_Model"><text></text></inputEntry>
        <outputEntry id="Rule14_Out"><text>"Green"</text></outputEntry>
      </rule>
      
      <!-- Rule 15: Default = Yellow -->
      <rule id="Rule_Default">
        <inputEntry id="RuleDef_Age"><text></text></inputEntry>
        <inputEntry id="RuleDef_Make"><text></text></inputEntry>
        <inputEntry id="RuleDef_Model"><text></text></inputEntry>
        <outputEntry id="RuleDef_Out"><text>"Yellow"</text></outputEntry>
      </rule>
      
    </decisionTable>
  </decision>
  
  <inputData id="InputData_age" name="Age" />
  <inputData id="InputData_carMake" name="Car Make" />
  <inputData id="InputData_carModel" name="Car Model" />
  
  <dmndi:DMNDI>
    <dmndi:DMNDiagram>
      <dmndi:DMNShape dmnElementRef="risk_rating_dmn">
        <dc:Bounds height="80" width="180" x="200" y="100" />
      </dmndi:DMNShape>
      <dmndi:DMNShape dmnElementRef="InputData_age">
        <dc:Bounds height="45" width="125" x="77" y="257" />
      </dmndi:DMNShape>
      <dmndi:DMNShape dmnElementRef="InputData_carMake">
        <dc:Bounds height="45" width="125" x="227" y="257" />
      </dmndi:DMNShape>
      <dmndi:DMNShape dmnElementRef="InputData_carModel">
        <dc:Bounds height="45" width="125" x="377" y="257" />
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</definitions>
